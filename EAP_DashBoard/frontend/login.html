<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Index Page</title>
    <script src="../static/js/vue.global.js"></script>
    <script src="../static/js/tailwindcss.js"></script>
    <script src="../static/js/axios.min.js"></script>
    <style>
      html,
      body {
        font-family: "Inter", sans-serif;
        margin: 0;
        padding: 0;
        height: 100%;
        background: linear-gradient(
          135deg,
          #f8fafc 0%,
          #e2e8f0 25%,
          #cbd5e1 50%,
          #94a3b8 75%,
          #64748b 100%
        );
        overflow: hidden;
      }

      /* æ¼‚æµ®é›»è…¦ç¬¦è™Ÿå‹•ç•« */
      .floating-icon {
        position: absolute;
        color: rgba(100, 116, 139, 0.15);
        animation: float linear infinite;
        font-size: 2rem;
        user-select: none;
        pointer-events: none;
      }

      @keyframes float {
        0% {
          transform: translateY(100vh) rotate(0deg);
          opacity: 0;
        }
        5% {
          opacity: 1;
        }
        95% {
          opacity: 1;
        }
        100% {
          transform: translateY(-100px) rotate(360deg);
          opacity: 0;
        }
      }
    </style></head
  >`
  <body>
    <div id="app">
      <div
        class="min-h-screen flex items-center justify-center px-4 relative overflow-hidden"
      >
        <!-- æ¼‚æµ®é›»è…¦ç¬¦è™ŸèƒŒæ™¯ -->
        <div class="absolute inset-0 overflow-hidden z-0">
          <div
            v-for="n in 15"
            :key="n"
            class="floating-icon"
            :style="generateIconStyle()"
            v-html="getRandomIcon()"
          ></div>
        </div>

        <!-- ç™»å…¥è¡¨å–® -->
        <div
          class="bg-white bg-opacity-90 p-8 rounded-lg shadow-xl w-full max-w-md relative z-10 border border-gray-200"
        >
          <h1 class="text-2xl font-bold text-center text-gray-800 mb-6">
            EAPå¥åº·åº¦ - ç™»å…¥é é¢
          </h1>
          <form @submit.prevent="login" class="space-y-6">
            <!-- å¸³è™Ÿ -->
            <div class="flex items-center">
              <label
                for="username"
                class="w-16 text-sm font-medium text-gray-700"
                >å¸³è™Ÿ</label
              >
              <input
                type="text"
                id="username"
                v-model="username"
                required
                class="flex-1 px-4 py-3 bg-gray-50 text-gray-900 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm placeholder-gray-400 border border-gray-300"
                placeholder="è«‹è¼¸å…¥å¸³è™Ÿ"
              />
            </div>

            <!-- å¯†ç¢¼ -->
            <div class="flex items-center">
              <label
                for="password"
                class="w-16 text-sm font-medium text-gray-700"
                >å¯†ç¢¼</label
              >
              <input
                type="password"
                id="password"
                v-model="password"
                required
                class="flex-1 px-4 py-3 bg-gray-50 text-gray-900 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none text-sm placeholder-gray-400 border border-gray-300"
                placeholder="è«‹è¼¸å…¥å¯†ç¢¼"
              />
            </div>

            <!-- æŒ‰éˆ• -->
            <button
              type="submit"
              class="w-full py-3 px-4 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:outline-none shadow-md"
            >
              ç™»å…¥
            </button>
          </form>
        </div>
      </div>

      <div class="absolute bottom-4 w-full text-center text-gray-600 text-sm">
        Made By RuiYing 2024 - {{ this.currentYear }} Â©
      </div>
    </div>

    <script>
      const app = Vue.createApp({
        data() {
          return {
            username: "",
            password: "",
            // è¨­ç½®ç•¶å‰å¹´ä»½
            currentYear: new Date().getFullYear(),
            // é›»è…¦ç›¸é—œç¬¦è™Ÿ
            computerIcons: [
              "ğŸ’»",
              "ğŸ–¥ï¸",
              "âŒ¨ï¸",
              "ğŸ–±ï¸",
              "ğŸ’¾",
              "ğŸ“±",
              "ğŸ”Œ",
              "ğŸ’¡",
              "âš¡",
              "ğŸ”§",
              "âš™ï¸",
              "ğŸ“Š",
              "ğŸ“ˆ",
              "ğŸŒ",
              "ğŸ”’",
            ],
          };
        },

        methods: {
          async login() {
            console.log("å¸³è™Ÿ:", this.username);
            console.log("å¯†ç¢¼:", this.password);

            // ä½¿ç”¨ axios ç™¼é€ POST è«‹æ±‚åˆ°å¾Œç«¯é€²è¡Œé©—è­‰
            axios
              .post("http://127.0.0.1:5000/api/login", {
                username: this.username,
                password: this.password,
              })
              .then((response) => {
                // å‡è¨­å¾Œç«¯è¿”å›çš„ response.data åŒ…å«é©—è­‰çµæœ
                if (response.data.success) {
                  // é©—è­‰æˆåŠŸï¼Œè·³è½‰åˆ° difficult.htmlï¼Œä¸¦é™„å¸¶å¸³è™Ÿåƒæ•¸
                  // æ¨¡æ“¬ä¸€å€‹å»¶é²ä¾†é¡¯ç¤º loading ç•«é¢
                  setTimeout(() => {
                    localStorage.setItem("username", this.username);
                    window.location.href = "EAP_Dashboard.html"; // é é¢è·³è½‰
                  }, 300); // å»¶é² 0.3 ç§’è·³è½‰
                } else {
                  // å¦‚æœé©—è­‰å¤±æ•—ï¼Œé¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
                  alert("å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤");
                  this.account = "";
                  this.password = "";
                }
              })
              .catch((error) => {
                console.error("é©—è­‰éŒ¯èª¤:", error);
                alert("ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦");
              });
          },

          generateIconStyle() {
            // ç¬¦è™Ÿå¤§å°
            const size = Math.random() * 1.5 + 1;
            // éš¨æ©Ÿæ°´å¹³ä½ç½®
            const left = Math.random() * 100;
            // æ¼‚æµ®é€Ÿåº¦
            const duration = Math.random() * 15 + 10;
            // é–‹å§‹å»¶é² - è®“ç¬¦è™Ÿåœ¨ä¸åŒæ™‚é–“é–‹å§‹ï¼Œé¿å…ä¸€é–‹å§‹éƒ½åœ¨é ‚éƒ¨
            const delay = Math.random() * duration;
            // åˆå§‹ä½ç½® - è®“ç¬¦è™Ÿå¾ä¸åŒçš„å‚ç›´ä½ç½®é–‹å§‹
            const initialY = Math.random() * 120 + 100; // 100vh åˆ° 220vh ä¹‹é–“

            return {
              left: `${left}%`,
              fontSize: `${size}rem`,
              animationDuration: `${duration}s`,
              animationDelay: `-${delay}s`, // è² å»¶é²è®“å‹•ç•«ç«‹å³é–‹å§‹ä½†åœ¨ä¸åŒéšæ®µ
              transform: `translateY(${initialY}vh)`,
            };
          },

          getRandomIcon() {
            return this.computerIcons[
              Math.floor(Math.random() * this.computerIcons.length)
            ];
          },
        },
      });

      app.mount("#app");
    </script>
  </body>
</html>
